# Besu Stack - Production Configuration
# Use this for production/mainnet deployments
#
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                              âš ï¸  WARNING âš ï¸                                   â•‘
# â•‘                                                                              â•‘
# â•‘  THIS FILE CONTAINS EXAMPLE KEYS FOR DEMONSTRATION PURPOSES ONLY!           â•‘
# â•‘                                                                              â•‘
# â•‘  ğŸš¨ NEVER USE THESE KEYS IN PRODUCTION! ğŸš¨                                   â•‘
# â•‘                                                                              â•‘
# â•‘  Before deploying to production:                                             â•‘
# â•‘  1. Generate your own keys using network-bootstrapper                        â•‘
# â•‘  2. Replace ALL keys below with freshly generated ones                       â•‘
# â•‘  3. Update the genesis.raw with your new extraData                          â•‘
# â•‘  4. Update staticNodes.raw with your new enode URLs                          â•‘
# â•‘  5. Store keys using Kubernetes Secrets or external secret management       â•‘
# â•‘  6. Use existingSecret or existingSecrets instead of inline keys            â•‘
# â•‘  7. Review and adjust all resource limits for your workload                 â•‘
# â•‘                                                                              â•‘
# â•‘  Generate new keys:                                                          â•‘
# â•‘  docker run --rm ghcr.io/settlemint/network-bootstrapper generate \          â•‘
# â•‘    --validators 7 --outputType screen --accept-defaults                      â•‘
# â•‘                                                                              â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

genesis:
  raw: |
    {
      "config": {
        "chainId": 49240,
        "homesteadBlock": 0,
        "eip150Block": 0,
        "eip150Hash": "0x0000000000000000000000000000000000000000000000000000000000000000",
        "eip155Block": 0,
        "eip158Block": 0,
        "byzantiumBlock": 0,
        "constantinopleBlock": 0,
        "petersburgBlock": 0,
        "istanbulBlock": 0,
        "muirGlacierBlock": 0,
        "berlinBlock": 0,
        "londonBlock": 0,
        "shanghaiTime": 0,
        "zeroBaseFee": true,
        "contractSizeLimit": 2147483647,
        "evmStackSize": 2048,
        "qbft": {
          "blockperiodseconds": 2,
          "epochlength": 30000,
          "xemptyblockperiodseconds": 60,
          "requesttimeoutseconds": 65
        }
      },
      "nonce": "0x0",
      "timestamp": "0x0",
      "gasLimit": "0x1fffffffffffff",
      "difficulty": "0x1",
      "mixHash": "0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365",
      "coinbase": "0x0000000000000000000000000000000000000000",
      "alloc": {
        "0x49A321293556E949407f04F84e38e35AE508e2B3": {
          "balance": "0x446c3b15f9926687d2c40534fdb564000000000000"
        }
      },
      "extraData": "0xf8b9a00000000000000000000000000000000000000000000000000000000000000000f89394c8ddb5da0ce621a7aa495b1e81761d44c234663694ade5b14d5490f751eb14594f0ea7d0eb5fcc83ab9437e055aae03decb3bcfea4a9bf14b7f347abf1da9458491540ca6b6a844e56b883234a1dd402836cb2941d389964cafe6a9af3a186f43d5b16fdc6a11fbb94f6b64c7caab2d7d02fb506a00a2225996f48842d944bf618ef6a1ff2ab23eb20e00d4a4deec3925908c080c0"
    }

# Static nodes are auto-generated from validator public keys
# The enode URLs use the release namespace automatically

validators:
  replicas: 7
  keys:
    # âš ï¸  EXAMPLE KEYS - DO NOT USE IN PRODUCTION - GENERATE YOUR OWN!
    # For production, use existingSecret or existingSecrets instead of inline!
    inline:
      - privateKey: "0x0780e1e6c7afa055a63d734695030efadd300317c25757771dfc74fda501bad5"
        publicKey: "0x7424b721d8e4c2acdec863c78f69852a275874ee5cb0b4a4153018be3c571fb42d1b2eaf5670b9fa1881e68e8e403a4bd166fab8b5632765b8939e61ede589f1"
        nodeAddress: "0xC8Ddb5da0ce621a7aa495b1E81761d44c2346636"
      - privateKey: "0x451d58fafca4731d0a58c7902b52dbf7b270e0469196f64852c2d933a9da5adc"
        publicKey: "0x601c5a60fd92e20955ef80ddcbd43011dbf35ca89913ef7be594685a110d7cf6842ceb27f9b4b3d2ceb194900f513b33687f60d34c6c03387f8e061f202262f3"
        nodeAddress: "0xADE5b14D5490F751EB14594F0eA7d0Eb5Fcc83Ab"
      - privateKey: "0x66a53fb9f6ae70cb583d9269e72c6ab6fdebe2759411b240ea5ef424d37a1b87"
        publicKey: "0x173d7b64ed8ed6e2760af22d56dc0cbb1c8cd65a1b23bd6c4ba49dbbc1574caa3ddecec6f5bf19820d9309397e016cac932e370bcc4553cf750ded58601ea892"
        nodeAddress: "0x37E055aAe03deCB3BCfEa4a9bF14b7F347aBf1da"
      - privateKey: "0x155355083dcde742ef9da7f4d361752b637b796abce859ebac844c4f2e04357e"
        publicKey: "0x623aa2f6e82ccb83de201d823e14ce110dea2f2a92dc78a006380322a6d41c43491b128937646e1390769a5924ce06e437edb98766aeca229eab1dc912674659"
        nodeAddress: "0x58491540CA6B6a844E56B883234A1dd402836cB2"
      - privateKey: "0x1e680da32fec04aab319540ed66872eb1fd1ed2140b6e841a0fabfcfeea5c076"
        publicKey: "0xe01d84e7fab9caf47e0f6cc35239a4826984969cac82d32069a8caa93685bf580c173ab13a2362bdaeebe821788c7614f4f85725e45c31897b2016efd27b8c96"
        nodeAddress: "0x1d389964cAfE6A9af3a186F43d5b16fDC6A11fbB"
      - privateKey: "0x85ee036d243518fe5410f2c48914ec3b8cf52a597b443985250f304bd0509244"
        publicKey: "0x3b97c74f4ec17a5d4f708744879ba011811c24eb72841d97b286d4efe8eaaca44c77ed037f45eebdba8ddffb3e42209e2c75a0429e07a8342f37d5de747b6295"
        nodeAddress: "0xf6B64c7cAAB2D7d02FB506a00A2225996F48842d"
      - privateKey: "0x1ba69f18ed4bd720ab3841479c37744beb877549e92b1faae2724483c3baae4b"
        publicKey: "0xa54d556742ce8f15b095d96ddb2e9ebb6a358bcb1f07b1fe08e6e8f50db78a7151c7fc8364eeb53bb6cc4b31cdae3c353c69d4bf0e1d07b155b33a49e2012fbf"
        nodeAddress: "0x4bF618ef6A1FF2aB23EB20e00d4a4dEeC3925908"
  resources:
    requests:
      cpu: "4"
      memory: "16Gi"
    limits:
      cpu: "8"
      memory: "32Gi"
  persistence:
    size: 500Gi
  # Spread validators across nodes for HA
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/component: validator
            topologyKey: kubernetes.io/hostname

rpcNodes:
  replicas: 3
  resources:
    requests:
      cpu: "2"
      memory: "8Gi"
    limits:
      cpu: "4"
      memory: "16Gi"
  persistence:
    size: 1Ti
  # Spread RPC nodes across nodes for HA
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app.kubernetes.io/component: rpc
            topologyKey: kubernetes.io/hostname

podDisruptionBudget:
  validators:
    enabled: true
    minAvailable: 5 # Maintain quorum for 7 validators
  rpcNodes:
    enabled: true
    minAvailable: 2

# Enable monitoring
serviceMonitor:
  enabled: true
  interval: 30s
