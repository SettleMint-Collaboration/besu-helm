# Besu Stack - External Secrets Configuration
# Use with External Secrets Operator, Conjur, or HashiCorp Vault

validators:
  replicas: 4
  keys:
    # Option 1: Single secret containing all validator keys
    # The secret should have keys: validator-0, validator-1, validator-2, validator-3
    existingSecret:
      name: "besu-validator-keys"
      keyPrefix: "validator-"

    # Option 2: Individual secrets per validator (uncomment below, comment out existingSecret above)
    # existingSecrets:
    #   - name: vault-validator-0-key
    #     key: private-key
    #   - name: vault-validator-1-key
    #     key: private-key
    #   - name: vault-validator-2-key
    #     key: private-key
    #   - name: vault-validator-3-key
    #     key: private-key

rpcNodes:
  replicas: 2
  keys:
    # RPC nodes can also use external secrets if node keys are required
    existingSecret:
      name: "besu-rpc-keys"
      keyPrefix: "rpc-"

# Example ExternalSecret resources (create these separately):
#
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: besu-validator-keys
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: vault-backend
#     kind: ClusterSecretStore
#   target:
#     name: besu-validator-keys
#   data:
#     - secretKey: validator-0
#       remoteRef:
#         key: secret/besu/validators/0
#         property: private_key
#     - secretKey: validator-1
#       remoteRef:
#         key: secret/besu/validators/1
#         property: private_key
#     - secretKey: validator-2
#       remoteRef:
#         key: secret/besu/validators/2
#         property: private_key
#     - secretKey: validator-3
#       remoteRef:
#         key: secret/besu/validators/3
#         property: private_key
